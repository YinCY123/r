---
title: "prepare_for Seurat"
author: "yincy"
date: "8/31/2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(tidyverse)
```


```{r}
df <- tibble(
  x = sample(letters, 10, T),
  y = round(rnorm(10, 10, 3), 0)
)

df <- df %>%
  arrange(x) %>% 
  mutate(
    rank = rank(x, ties.method = "min"),
    uniq = duplicated(x),
    logical = as.numeric(uniq),
    log_cum = cumsum(logical),
    rank_l = rank - log_cum
  )

df
```





